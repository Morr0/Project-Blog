(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{356:function(e,t,r){"use strict";r(50),r(32);var n,o,c=r(9),l={components:{VueEditor:r(358).a},data:function(){return{id:this.$route.params.id,title:"",description:"",content:"",draft:!0,hidden:!1}},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.state.sessionStorage.loggedIn){t.next=2;break}return t.abrupt("return",e.$router.replace("/"));case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.id){t.next=21;break}return t.next=4,fetch("".concat(e.$store.state.backend,"/posts/").concat(e.id),{credentials:"include"});case 4:if((r=t.sent).ok){t.next=7;break}return t.abrupt("return",e.$router.replace("/"));case 7:return t.next=9,r.json();case 9:if(!(n=t.sent)){t.next=20;break}if(e.title=n.title,e.content=n.content,e.description=n.description,e.draft=n.draft,e.hidden=n.hidden,n.author===e.$store.state.sessionStorage.loggedInUserId){t.next=18;break}return t.abrupt("return",e.$router.replace("/"));case 18:t.next=21;break;case 20:return t.abrupt("return",e.$router.replace("/"));case 21:t.next=27;break;case 23:return t.prev=23,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",e.$router.replace("/"));case 27:document.editor=e.$refs.editor;case 28:case"end":return t.stop()}}),t,null,[[0,23]])})))()},methods:{edit:(o=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.id){e.next=17;break}return e.prev=1,e.next=4,fetch("".concat(this.$store.state.backend,"/posts/"),{method:"POST",headers:{author:this.$store.state.sessionStorage.loggedInUserId,title:this.title,description:this.description,draft:this.draft,hidden:this.hidden,"Content-Type":"text/html",Accept:"text/html"},body:this.content,credentials:"include"});case 4:if(200===(t=e.sent).status){e.next=7;break}return e.abrupt("return",alert("Failed to post"));case 7:return e.next=9,t.json();case 9:this.id=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:e.next=28;break;case 17:return e.prev=17,e.next=20,fetch("".concat(this.$store.state.backend,"/posts/").concat(this.id),{method:"PUT",headers:{author:this.$store.state.sessionStorage.loggedInUserId,title:this.title,description:this.description,draft:this.draft,hidden:this.hidden,"Content-Type":"text/html",Accept:"text/html"},body:this.content,credentials:"include"});case 20:if(200===e.sent.status){e.next=23;break}return e.abrupt("return",alert("Failed to post"));case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(17),console.log(e.t1);case 28:this.$router.replace("/post/".concat(this.id));case 29:case"end":return e.stop()}}),e,this,[[1,12],[17,25]])}))),function(){return o.apply(this,arguments)}),remove:(n=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.id){e.next=14;break}return e.prev=1,e.next=4,fetch("".concat(this.$store.state.backend,"/posts/").concat(this.id),{method:"DELETE",credentials:"include"});case 4:if(e.sent.ok){e.next=7;break}return e.abrupt("return",alert("There was a problem deleting your post"));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:e.next=15;break;case 14:return e.abrupt("return");case 15:this.$router.replace("/");case 16:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return n.apply(this,arguments)}),cancel:function(){this.$router.replace("/")}}},d=r(12),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-4 flex flex-wrap -mx-1 sm:-mx-1 md:-mx-1 lg:-mx-1 xl:-mx-1 justify-center max-w-full"},[r("div",{staticClass:"my-1 px-1 sm:my-1 sm:px-1 md:my-1 md:px-1 lg:my-1 lg:px-1 xl:my-1 xl:px-1"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.edit(t)}}},[r("div",{staticClass:"mb-4 flex flex-row flex-grow"},[r("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2 mr-2",attrs:{for:"title"}},[e._v("\n                Title\n                ")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{type:"text",required:"",id:"title",placeholder:"Title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mb-4 flex flex-row flex-grow"},[r("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2 mr-2",attrs:{for:"description"}},[e._v("\n                Description\n                ")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"resize-y shadow appearance-none border rounded py-2 px-3 text-gray-700\n                    leading-tight focus:outline-none focus:shadow-outline",attrs:{required:"",id:"description",placeholder:"Description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),e._v(" "),r("client-only",[r("vue-editor",{ref:"editor",staticClass:"articleContent w-full max-w-full",model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),r("div",{staticClass:"flex flex-row"},[r("label",{staticClass:"md:w-2/3 block text-gray-500 font-bold"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.draft,expression:"draft"}],staticClass:"mr-2 leading-tight",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.draft)?e._i(e.draft,null)>-1:e.draft},on:{change:function(t){var r=e.draft,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&(e.draft=r.concat([null])):c>-1&&(e.draft=r.slice(0,c).concat(r.slice(c+1)))}else e.draft=o}}}),e._v(" "),r("span",{staticClass:"text-sm"},[e._v("\n                        Draft\n                    ")])]),e._v(" "),r("label",{staticClass:"md:w-2/3 block text-gray-500 font-bold"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.hidden,expression:"hidden"}],staticClass:"mr-2 leading-tight",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hidden)?e._i(e.hidden,null)>-1:e.hidden},on:{change:function(t){var r=e.hidden,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&(e.hidden=r.concat([null])):c>-1&&(e.hidden=r.slice(0,c).concat(r.slice(c+1)))}else e.hidden=o}}}),e._v(" "),r("span",{staticClass:"text-sm"},[e._v("\n                        Hidden\n                    ")])])]),e._v(" "),r("button",{staticClass:"flex-shrink-0 border-transparent border-4 text-teal-500 \n            hover:text-teal-800 text-sm py-1 px-2 rounded",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}},[e._v("Cancel")]),e._v(" "),r("button",{staticClass:"flex-shrink-0 bg-teal-500 hover:bg-teal-700 border-teal-500 \n            hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded",attrs:{type:"submit"}},[e._v("\n            "+e._s(e.id?"Update":e.draft?"Draft":"Post"))]),e._v(" "),r("button",{staticClass:"flex-shrink-0 bg-red-600 hover:bg-teal-700 border-red-600 \n            hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.remove(t)}}},[e._v("\n            Delete")])],1)])])}),[],!1,null,null,null);t.a=component.exports},359:function(e,t,r){"use strict";r.r(t);var n={components:{CreateEditView:r(356).a}},o=r(12),component=Object(o.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("CreateEditView")}),[],!1,null,null,null);t.default=component.exports}}]);